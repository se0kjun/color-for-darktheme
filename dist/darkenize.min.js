"use strict";function darkenize(){this.dark_theme_attribute=[{type:"background",value:"background-color"},{type:"text",value:"color"},{type:"border",value:"border-bottom-color"},{type:"border",value:"border-top-color"},{type:"border",value:"border-left-color"},{type:"border",value:"border-right-color"}],this.color_preset={text:{threshold:.3,control:1.4},background:{threshold:.7,control:.6},border:{threshold:.3,control:1.4}},this.stop_elem=["meta","head","link","script","style","title","svg"],this.dynamic_coloring=!1}darkenize.prototype.autoColorize=function(e){var r;r=e?e:0!=this.stop_elem.length?document.querySelectorAll("*:not("+this.stop_elem.join("):not(")+")"):document.querySelectorAll("*"),r.forEach(function(e){this.setColorForDarkTheme(e)},this)},darkenize.prototype.setColorForDarkTheme=function(e){var r;if(void 0===typeof window)throw"This method is only available in web browser";return r=window.getComputedStyle(e),this.dark_theme_attribute.forEach(function(t){e.style.setProperty(t.value,this.getColorForDarkTheme(r[t.value],this.color_preset[t.type]))},this),e},darkenize.prototype.getColorForDarkTheme=function(e,r){var t=darkenize.parseColor(e),o=e,a=r.threshold,n=r.control,l=1;if("rgb"==t.space){var i=darkenize.rgb2hsv(t.value[0],t.value[1],t.value[2]);i.v>a&&(i.v*=n*l,o=darkenize.hsv2rgb(i.h,i.s,i.v,"hex"))}else"hsv"==t.space&&t.value[2]>a&&(t.value[2]*=n*l,o=darkenize.hsv2rgb(t.value[0],t.value[1],t.value[2],"hex"));return o},darkenize.rgb2hsv=function(e,r,t,o){var a=o||"object",n={_r:e/255,_g:r/255,_b:t/255},l=Object.keys(n).reduce(function(e,r){return n[e]>n[r]?e:r}),i=Object.keys(n).reduce(function(e,r){return n[e]<n[r]?e:r}),s=n[l]-n[i],u=60;if("_r"==l?u*=(n._g-n._b)/s%6:"_g"==l?u*=(n._b-n._r)/s+2:"_b"==l&&(u*=(n._r-n._g)/s+4),"object"==a)return{h:0==s?0:u,s:0==n[l]?0:s/n[l],v:n[l]}},darkenize.hsv2rgb=function(e,r,t,o){var a=o||"hex",n=e<0?e+360:e,l={_r:0,_g:0,_b:0},i=r*t,s=i*(1-Math.abs(n/60%2-1)),u=t-i;return n>=0&&n<60?(l._r=i,l._g=s):n>=60&&n<120?(l._r=s,l._g=i):n>=120&&n<180?(l._g=i,l._b=s):n>=180&&n<240?(l._g=s,l._b=i):n>=240&&n<300?(l._r=s,l._b=i):n>=300&&n<360&&(l._r=i,l._b=s),"object"==a?{r:255*(l._r+u),g:255*(l._g+u),b:255*(l._b+u)}:"hex"==a?"#"+((1<<24)+(Math.floor(255*(l._r+u))<<16)+(Math.floor(255*(l._g+u))<<8)+Math.floor(255*(l._b+u))).toString(16).slice(1):void 0},darkenize.parseColor=function(e){var r,t;if(0==e.indexOf("#")){t="rgb",4==e.length&&(e=e.replace(/\w/g,function(e){return e+e}));var o=parseInt(e.substr(1),16);r=[o>>16&255,o>>8&255,255&o]}else e.indexOf("rgb")?(t="rgb",r=e.match(/([0-9]*[.])?[0-9]+/g).map(function(e){return parseFloat(e)})):e.indexOf("hsv")&&(t="hsv",r=e.match(/([0-9]*[.])?[0-9]+/g).map(function(e){return parseFloat(e)}));return{space:t,value:r}},window.darkenize=darkenize;